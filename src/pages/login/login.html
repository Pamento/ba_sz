<!--
  Generated template for the Login page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content>
  <div class="header">
    <div class="logo">
        <img src="assets/img/logo.png" />
    </div>
    <div class="w50">
      <label>{{ 'login.connect'| i18n}}</label>
    </div>
    <div class="w50">
      <button (tap)="forwardTo('SignInPage')">{{ 'login.signin'| i18n}}</button>
    </div>
  </div>
  <div class="form-container">
    <h1>{{ 'login.connect'| i18n}}</h1>
    <form [formGroup]="form" (ngSubmit)="login()" novalidate>
        <ion-item>
          <ion-input type="text" formControlName="email" [(ngModel)]="email"></ion-input>
          <ion-label fixed>{{ 'email'| i18n}}</ion-label>
        </ion-item>
        <div class="error" *ngIf="form.submit && form.controls.email.errors">
          <p *ngIf="form.controls.email.errors?.required">{{ 'auth.emailRequired'| i18n}}</p>
          <p *ngIf="form.controls.email.errors?.email">{{ 'auth.emailInvalid'| i18n}}</p>
        </div>
        <ion-item>
          <ion-input type="password" formControlName="password" [(ngModel)]="password"></ion-input>
          <ion-label fixed>{{ 'auth.pwd'| i18n}}</ion-label>
        </ion-item>
        <div class="error" *ngIf="form.submit && form.controls.password.errors">
          <p *ngIf="form.controls.password.errors?.required">{{ 'auth.pwdRequired'| i18n}}</p>
        </div>
        <div class="error" *ngIf="form.submit && form.apiError">
          <p>{{ (form.apiError| i18n) || ( ("Technical error"| i18n)+" :"+form.apiError) }}</p>
        </div>
        <button class="button-form" ion-button block type="submit" [disabled]='form.submitting'>
          {{ 'validate'| i18n}} 
        </button>
    </form>
  </div>
  <p class="reset-btn" (click)='resetPwd()'>{{ 'login.resetPwd'| i18n}} </p>
</ion-content>