<ion-header>
  <ion-navbar>
    <ion-title>{{'profile.myProfile' | i18n}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <div class="form-container">
    <h1>{{'profile.myInfos' | i18n}}</h1>

    <form [formGroup]="form" (ngSubmit)="save()" novalidate>
      <ion-item>
        <ion-input type="text" formControlName="username" [(ngModel)]="profile.name"></ion-input>
        <ion-label fixed>{{ 'signin.completeName'| i18n}}</ion-label>
      </ion-item>
      <div class="error" *ngIf="form.submit && form.controls.username.errors">
        <p *ngIf="form.controls.username.errors?.required">{{ 'signin.completeNameRequired'| i18n}}</p>
      </div>
      <ion-item>
        <ion-input type="text" disabled="true" formControlName="email" [(ngModel)]="profile.email"></ion-input>
        <ion-label fixed class="label-right">{{ 'email'| i18n}}</ion-label>
      </ion-item>
      <div class="error" *ngIf="form.submit && form.controls.email.errors">
        <p *ngIf="form.controls.email.errors?.required">{{ 'auth.emailRequired'| i18n}}</p>
      </div>
      <ion-item>
        <ion-label fixed class="label-right">{{ 'auth.pwd'| i18n}}</ion-label>
        <a class="button-style" item-right large (tap)="forwardTo('ResetPwdPage')">{{'change' | i18n}}</a>
      </ion-item>

      <ion-item>
        <ion-label>{{ 'signin.category'| i18n}}</ion-label>
        <ion-select disabled="true" formControlName="category" [(ngModel)]="profile.group.id">
          <ion-option *ngFor='let category of categoryList' [value]="category.id">{{category.name}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-input type="text" formControlName="address1" [(ngModel)]="profile.address.address1"></ion-input>
        <ion-label fixed class="label-right">{{ 'profile.address1'| i18n}}</ion-label>
      </ion-item>
      <div class="error" *ngIf="form.submit && form.controls.address1.errors">
        <p *ngIf="form.controls.address1.errors?.required">{{ 'profile.address1Required'| i18n}}</p>
      </div>

      <ion-item>
        <ion-input type="text" formControlName="address2" [(ngModel)]="profile.address.address2"></ion-input>
        <ion-label fixed class="label-right">{{ 'profile.address2'| i18n}}</ion-label>
      </ion-item>

      <ion-item>
        <ion-input type="text" formControlName="postal" [(ngModel)]="profile.address.postal"></ion-input>
        <ion-label fixed class="label-right">{{ 'profile.postal'| i18n}}</ion-label>
      </ion-item>
      <div class="error" *ngIf="form.submit && form.controls.postal.errors">
        <p *ngIf="form.controls.postal.errors?.required">{{ 'profile.postalRequired'| i18n}}</p>
      </div>

      <ion-item>
        <ion-input type="text" formControlName="city" [(ngModel)]="profile.address.city"></ion-input>
        <ion-label fixed class="label-right">{{ 'profile.city'| i18n}}</ion-label>
      </ion-item>
      <div class="error" *ngIf="form.submit && form.controls.city.errors">
        <p *ngIf="form.controls.city.errors?.required">{{ 'profile.cityRequired'| i18n}}</p>
      </div>

      <ion-item>
        <ion-label>{{ 'country'| i18n}}</ion-label>
        <ion-select formControlName="country" [(ngModel)]="profile.countryId">
          <ion-option *ngFor="let country of countryList |Â unique:'id'" [value]="country.id">{{country.name}}</ion-option>
        </ion-select>
      </ion-item>
      <div class="error" *ngIf="form.submit && form.controls.country.errors">
        <p *ngIf="form.controls.country.errors?.required">{{ 'auth.countryRequired'| i18n}}</p>
      </div>

      <ion-item>
        <ion-input type="number" formControlName="phone" [(ngModel)]="profile.phone"></ion-input>
        <ion-label fixed class="label-right">{{ 'profile.phone'| i18n}}</ion-label>
      </ion-item>

      <div class="error" *ngIf="form.submit && form.controls.phone.errors">
        <p *ngIf="form.controls.phone.errors?.required">{{ 'profile.phoneRequired'| i18n}}</p>
      </div>
      <button class="button-form" ion-button block type="submit" [disabled]='form.submitting'>
        {{'update' | i18n}}
      </button>
    </form>
  </div>
</ion-content>
